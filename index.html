<!DOCTYPE html>
<html lang="en">

<head>
    <title>maxpaj</title>
    <meta charset="utf-8" />
    <meta name="description" content="maxpaj" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="./style.css" />
</head>

<body>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
                "ascii": "./three/ascii.js"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { AsciiEffect } from 'ascii';

        let camera, scene, renderer, renderTarget, effect;
        let torus, sphere, box;

        const container = document.querySelector(".three");

        init();
        animate();

        function init() {
            camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.y = 100;
            camera.position.z = 500;
            camera.position.x = 0;

            scene = new THREE.Scene();
            scene.background = new THREE.Color(0, 0, 0);

            const pointLight1 = new THREE.PointLight(0xffffff, 3, 0, 0);
            pointLight1.position.set(500, 500, 0);
            scene.add(pointLight1);

            const pointLight2 = new THREE.PointLight(0xffffff, 1, 0, 0);
            pointLight2.position.set(-500, 500, 500);
            scene.add(pointLight2);

            let shader = new THREE.MeshStandardMaterial({
                metalness: 1,   // between 0 and 1
                roughness: 0.5, // between 0 and 1
            });
            // new THREE.MeshPhongMaterial({ flatShading: true });

            torus = new THREE.Mesh(new THREE.TorusGeometry(200, 30, 10, 10), shader);
            torus.position.x = -40;
            // scene.add(torus);

            sphere = new THREE.Mesh(new THREE.SphereGeometry(200, 20, 10), shader);
            // scene.add(sphere);

            box = new THREE.Mesh(new THREE.BoxGeometry(200, 200, 200), shader)
            scene.add(box);

            renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            // document.body.appendChild(renderer.domElement);
            // renderTarget = new THREE.WebGLRenderTarget(window.innerWidth, window.innerHeight);
            effect = new AsciiEffect(renderer, ' .:-+*=%@#', { invert: true, alpha: true });
            effect.setSize(window.innerWidth, window.innerHeight);

            container.appendChild(effect.domRenderElement);
            window.addEventListener('resize', onWindowResize);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            effect.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            render();
        }

        function render() {
            const timer = new Date().getTime();
            box.rotation.x = -timer * 0.0003;
            box.rotation.z = timer * 0.0002;
            box.rotation.y = timer * 0.0002;

            sphere.rotation.x = timer * 0.0003;
            sphere.rotation.z = timer * 0.0002;

            renderer.render(scene, camera);
            effect.render(renderer);
        }
    </script>

    <main>
        <img class="logo" src="assets/logo.svg" />
        <section>
            <p>I am a freelance software developer who thrives on solving problems, building amazing
                products, improving developer workflows and getting stuff done.
            </p>
        </section>
    </main>

    <div class="three"></div>
</body>

</html>